{"version":3,"sources":["../../../../../../usr/local/lib/node_modules/browserify/node_modules/browser-pack/_prelude.js","__index.js","lib/datetime.js","lib/background.js","lib/exterior.js","lib/interior.js","lib/utility.js"],"names":["index","timeModule","require","bgModule","extModule","intModule","init","exteriorTarget","interiorActive","classList","remove","add","selector","delay","timeTarget","document","querySelector","updateTime","window","setInterval","target","current","Date","day","convertDay","getDay","hours","getHours","slice","minutes","getMinutes","innerHTML","key","days","module","exports","backgrounds","utility","videoSelector","imageSelector","imageTarget","videoTarget","updateBackground","pause","simpleAjax","then","response","processFile","responseObject","undefined","file","type","getFileType","updateImage","updateVideo","regex","videoTypes","imageTypes","exec","indexOf","src","hide","show","children","setAttribute","load","play","exterior","updateWeather","processApi","main","temp","Math","round","description","escapeStr","weather","interior","updateTemperature","active","processTemp","url","Promise","resolve","reject","req","XMLHttpRequest","open","onload","status","responseText","JSON","parse","send","str","div","createElement","appendChild","createTextNode","el"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var index = {},\n    timeModule = require('./lib/datetime'),\n    bgModule = require('./lib/background'),\n    extModule = require('./lib/exterior'),\n    intModule = require('./lib/interior');\n\n\nindex.init = function() {\n    timeModule();\n\n    bgModule();\n\n    var exteriorTarget = extModule();\n\n    var interiorActive = intModule();\n\n    if (interiorActive) {\n        exteriorTarget.classList.remove('info_bar-item-large');\n    } else {\n        exteriorTarget.classList.add('info_bar-item-large');\n    }\n};\n\nindex.init();\n","var timeModule = {};\n\ntimeModule.init = function(selector, delay) {\n    selector = selector || \".info_bar-clock\";\n    delay = delay || 5;\n    var timeTarget = document.querySelector(selector);\n\n    timeModule.updateTime(timeTarget);\n    window.setInterval(timeModule.updateTime, delay * 1000, timeTarget);\n};\n\ntimeModule.updateTime = function(target) {\n    var current = new Date(),\n        day = timeModule.convertDay(current.getDay()),\n        hours = ('0'+current.getHours()).slice(-2),\n        minutes = ('0'+current.getMinutes()).slice(-2);\n\n    target.innerHTML = day + ' ' + hours + ':' + minutes;\n};\n\ntimeModule.convertDay = function(key) {\n    var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    return days[key];\n};\n\n\nmodule.exports = timeModule.init;\n","var backgrounds = {},\n    utility = require('./utility');\n\nbackgrounds.init = function(videoSelector, imageSelector, delay) {\n    videoSelector = videoSelector || \".bg-video\";\n    imageSelector = imageSelector || \".bg-image\";\n    delay = delay || 60;\n\n    backgrounds.imageTarget = document.querySelector(imageSelector);\n    backgrounds.videoTarget = document.querySelector(videoSelector);\n\n    backgrounds.updateBackground();\n    window.setInterval(backgrounds.updateBackground, delay * 1000);\n};\n\nbackgrounds.updateBackground = function() {\n    backgrounds.videoTarget.pause();\n    utility.simpleAjax('backgrounds', 'get').then(\n        function(response) { backgrounds.processFile(response); },\n        function() { return; }\n    );\n};\n\nbackgrounds.processFile = function(responseObject) {\n    if (!responseObject || typeof responseObject.file == undefined ||\n        !responseObject.file\n    ) {\n        return;\n    } else {\n        var file = responseObject.file;\n    }\n\n    var type = backgrounds.getFileType(file);\n    if (!type) {\n        return;\n    } else if (type === 'image') {\n        backgrounds.updateImage(file);\n    } else {\n        backgrounds.updateVideo(file, type);\n    }\n};\n\nbackgrounds.getFileType = function(file) {\n    var regex = /(?:\\.([^.]+))?$/,\n        videoTypes = ['mp4', 'webm', 'ogg'],\n        imageTypes = ['jpg', 'jpeg', 'png', 'gif'];\n\n    var type = regex.exec(file)[1];\n    if (videoTypes.indexOf(type) > -1) {\n        return 'video/' + type;\n    } else if (imageTypes.indexOf(type) > -1) {\n        return 'image';\n    } else {\n        return;\n    }\n};\n\nbackgrounds.updateImage = function(file) {\n    backgrounds.imageTarget.src = file;\n    utility.hide(backgrounds.videoTarget);\n    utility.show(backgrounds.imageTarget);\n};\n\nbackgrounds.updateVideo = function(file, type) {\n    backgrounds.videoTarget.children[0].setAttribute('src', file);\n    backgrounds.videoTarget.children[0].setAttribute('type', type);\n    backgrounds.videoTarget.load();\n    utility.hide(backgrounds.imageTarget);\n    utility.show(backgrounds.videoTarget);\n    backgrounds.videoTarget.play();\n};\n\n\nmodule.exports = backgrounds.init;\n","var exterior = {},\n    utility = require('./utility');\n\nexterior.init = function(selector, delay) {\n    selector = selector || '.info_bar-w_exterior';\n    delay = delay || 1000;\n\n    exterior.target = document.querySelector(selector);\n\n    exterior.updateWeather();\n    window.setInterval(exterior.updateWeather, delay * 1000);\n\n    return exterior.target;\n};\n\nexterior.updateWeather = function() {\n    utility.simpleAjax('exterior', 'get').then(\n        function(response) { exterior.processApi(response); },\n        function() { return; }\n    );\n};\n\nexterior.processApi = function(responseObject) {\n    if (!responseObject || typeof responseObject.main == undefined ||\n        !responseObject.main\n    ) {\n        return;\n    } else {\n        var temp = Math.round(responseObject.main.temp),\n            description = utility.escapeStr(responseObject.weather[0].description);\n    }\n\n    exterior.target.innerHTML = description + ' ' + temp;\n};\n\n\nmodule.exports = exterior.init;\n","var interior = {},\n    utility = require('./utility');\n\ninterior.init = function(selector, delay) {\n    selector = selector || '.info_bar-w_interior';\n    delay = delay || 300;\n\n    interior.target = document.querySelector(selector);\n\n    interior.updateTemperature();\n    window.setInterval(interior.updateWeather, delay * 1000);\n    return interior.active;\n};\n\ninterior.active = false;\n\ninterior.updateTemperature = function() {\n    utility.simpleAjax('interior', 'get').then(\n        function(response) { interior.processTemp(response); },\n        function() { return; }\n    );\n};\n\ninterior.processTemp = function(responseObject) {\n    if (!responseObject || typeof responseObject.temp == undefined ||\n        !responseObject.temp\n    ) {\n        interior.active = false;\n        utility.hide(interior.target);\n    } else {\n        var temp = Math.round(responseObject.temp);\n        interior.target.innerHTML = temp;\n        utility.show(interior.target);\n        interior.active = true;\n    }\n};\n\n\nmodule.exports = interior.init;\n","var utility = {};\n\nutility.simpleAjax = function(url, type) {\n    return new Promise(function(resolve, reject) {\n        var req = new XMLHttpRequest();\n        req.open(type, url, true);\n\n        req.onload = function() {\n            if (req.status === 200 && req.responseText) {\n                resolve(JSON.parse(req.responseText));\n            } else {\n                reject();\n            }\n        }\n\n        req.send();\n    });\n};\n\nutility.escapeStr = function(str) {\n    var div = document.createElement('div');\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n};\n\nutility.hide = function(el) {\n    el.classList.remove('show');\n    el.classList.add('hide');\n};\n\nutility.show = function(el) {\n    el.classList.remove('hide');\n    el.classList.add('show');\n};\n\n\nmodule.exports = utility;\n"]}